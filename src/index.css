@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   Viewport Height Fix for Mobile
   ======================================== */

/* Dynamic Viewport Height - 最も互換性の高い方法 */
:root {
  /* CSS変数でビューポート高さを管理 */
  --app-height: 100vh;
  --app-height: 100dvh; /* モバイルブラウザのアドレスバーを考慮 */
}

/* HTML/Body のスクロール防止 */
html {
  height: 100%;
  height: 100dvh;
  overflow: hidden;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

body {
  @apply bg-gray-900 text-white;
  font-family: 'Inter', sans-serif;
  
  /* ビューポート高さを完全に埋める */
  height: 100%;
  height: 100dvh;
  min-height: 100vh;
  min-height: -webkit-fill-available;
  min-height: 100dvh;
  
  /* スクロール防止 */
  overflow: hidden;
  overscroll-behavior: none;
  
  /* Safe Area (ノッチ付きデバイス対応) */
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  
  /* モバイルでの意図しない動作を防止 */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* React Root要素 */
#root {
  height: 100%;
  height: 100dvh;
  min-height: 100vh;
  min-height: -webkit-fill-available;
  min-height: 100dvh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* ========================================
   Full Height Utility Classes
   ======================================== */

/* 動的ビューポート高さを使用するコンテナ */
.app-container {
  height: 100vh;
  height: 100dvh;
  min-height: 100vh;
  min-height: -webkit-fill-available;
  min-height: 100dvh;
  overflow: hidden;
  position: relative;
}

/* Safe Area Inset対応 */
.safe-area-inset-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-inset-top {
  padding-top: env(safe-area-inset-top);
}

/* ========================================
   Additional Mobile Fixes
   ======================================== */

/* iOS Safari で100vhがアドレスバーを含む問題の対策 */
@supports (-webkit-touch-callout: none) {
  html, body, #root {
    height: -webkit-fill-available;
  }
  
  .app-container {
    min-height: -webkit-fill-available;
  }
}
